# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Mega #1 (–ë–ª–æ–∫–∏ 1-8)

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

1. **–ó–∞–≥—Ä—É–∑–∏ –ø—Ä–æ—à–∏–≤–∫—É** `actuator_mega1/actuator_mega1.ino` –Ω–∞ Arduino Mega #1
2. **–ü–æ–¥–∫–ª—é—á–∏ USB** –æ—Ç Mega –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä—É
3. **–û—Ç–∫—Ä–æ–π Serial Monitor** –≤ Arduino IDE:
   - Tools ‚Üí Serial Monitor
   - –£—Å—Ç–∞–Ω–æ–≤–∏ baud rate: **115200**
   - Line ending: **Newline**

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç—ã –¥–æ–ª–∂–µ–Ω —É–≤–∏–¥–µ—Ç—å:

```
========================================
  RAMS MEGA #1 ACTUATOR CONTROLLER
  Blocks 1-8 (16 Actuators)
  Arduino Mega - Pins 22-53
  INVERSE LOGIC (LOW=ON, HIGH=OFF)
  Serial1 (TX1=18, RX1=19) ‚Üî ESP32
========================================

[INIT] 32 pins (22-53) initialized (all OFF)
[INIT] 8 blocks ready
[INIT] Serial1 ready for ESP32 commands

[READY] Waiting for commands from ESP32...
========================================
```

‚úÖ –ï—Å–ª–∏ –≤–∏–¥–∏—à—å —ç—Ç–æ - **–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ!**

---

## üß™ –¢–µ—Å—Ç 1: –ë–ª–æ–∫ 1 –í–í–ï–†–• (5 —Å–µ–∫—É–Ω–¥)

**–ö–æ–º–∞–Ω–¥–∞ –≤ Serial Monitor:**
```json
{"block":1,"action":"up","duration":5000}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[CMD] Received: {"block":1,"action":"up","duration":5000}
[BLOCK 1] ‚Üí UP (5000ms, 2 actuators)
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
- –ü–∏–Ω—ã 22, 24 ‚Üí LOW (–≤–∫–ª—é—á–µ–Ω—ã)
- –ü–∏–Ω—ã 23, 25 ‚Üí HIGH (–≤—ã–∫–ª—é—á–µ–Ω—ã)
- –ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥:
```
[AUTO-STOP] Block 1
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** –∞–∫—Ç—É–∞—Ç–æ—Ä—ã –±–ª–æ–∫–∞ 1 –¥–æ–ª–∂–Ω—ã –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–≤–µ—Ä—Ö 5 —Å–µ–∫—É–Ω–¥ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è

---

## üß™ –¢–µ—Å—Ç 2: –ë–ª–æ–∫ 1 –í–ù–ò–ó (5 —Å–µ–∫—É–Ω–¥)

**–ö–æ–º–∞–Ω–¥–∞:**
```json
{"block":1,"action":"down","duration":5000}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[CMD] Received: {"block":1,"action":"down","duration":5000}
[BLOCK 1] ‚Üí DOWN (5000ms, 2 actuators)
[AUTO-STOP] Block 1
```

**–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**
- –ü–∏–Ω—ã 22, 24 ‚Üí HIGH (–≤—ã–∫–ª—é—á–µ–Ω—ã)
- –ü–∏–Ω—ã 23, 25 ‚Üí LOW (–≤–∫–ª—é—á–µ–Ω—ã)
- –ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥ –∞–≤—Ç–æ—Å—Ç–æ–ø

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** –∞–∫—Ç—É–∞—Ç–æ—Ä—ã –±–ª–æ–∫–∞ 1 –¥–æ–ª–∂–Ω—ã –¥–≤–∏–≥–∞—Ç—å—Å—è –≤–Ω–∏–∑ 5 —Å–µ–∫—É–Ω–¥

---

## üß™ –¢–µ—Å—Ç 3: –†—É—á–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–ª–æ–∫–∞

**–ö–æ–º–∞–Ω–¥–∞ 1 - –∑–∞–ø—É—Å—Ç–∏ –≤–≤–µ—Ä—Ö:**
```json
{"block":1,"action":"up","duration":30000}
```

**–ü–æ–¥–æ–∂–¥–∏ 2 —Å–µ–∫—É–Ω–¥—ã, –∑–∞—Ç–µ–º –∫–æ–º–∞–Ω–¥–∞ 2 - –æ—Å—Ç–∞–Ω–æ–≤–∏:**
```json
{"block":1,"action":"stop"}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[BLOCK 1] ‚Üí UP (30000ms, 2 actuators)
[BLOCK 1] ‚Üí STOP
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** –±–ª–æ–∫ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–æ –∫–æ–º–∞–Ω–¥–µ stop

---

## üß™ –¢–µ—Å—Ç 4: –ë–ª–æ–∫ 8 (–ø–æ—Å–ª–µ–¥–Ω–∏–π –±–ª–æ–∫)

**–ö–æ–º–∞–Ω–¥–∞:**
```json
{"block":8,"action":"up","duration":5000}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[CMD] Received: {"block":8,"action":"up","duration":5000}
[BLOCK 8] ‚Üí UP (5000ms, 2 actuators)
[AUTO-STOP] Block 8
```

**–ü–∏–Ω—ã:**
- 46, 48 ‚Üí LOW
- 47, 49 ‚Üí HIGH

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** –±–ª–æ–∫ 8 (–ø–∏–Ω—ã 46-49) —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üß™ –¢–µ—Å—Ç 5: –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –í–°–ï –±–ª–æ–∫–∏

**–ö–æ–º–∞–Ω–¥–∞ 1 - –∑–∞–ø—É—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤:**
```json
{"block":1,"action":"up","duration":30000}
```
```json
{"block":3,"action":"down","duration":30000}
```
```json
{"block":5,"action":"up","duration":30000}
```

**–ö–æ–º–∞–Ω–¥–∞ 2 - –æ—Å—Ç–∞–Ω–æ–≤–∏ –≤—Å–µ:**
```json
{"block":0,"action":"stop"}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[CMD] STOP ALL BLOCKS
[SYSTEM] All blocks stopped
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** –í–°–ï –±–ª–æ–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## üß™ –¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –±–ª–æ–∫–æ–≤

**–ö–æ–º–∞–Ω–¥–∞ (–Ω–µ–≤–µ—Ä–Ω—ã–π –±–ª–æ–∫ –¥–ª—è Mega #1):**
```json
{"block":9,"action":"up","duration":5000}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[CMD] Received: {"block":9,"action":"up","duration":5000}
[ERROR] Invalid block number: 9
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** Mega #1 –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –±–ª–æ–∫–∏ 9-15 (—ç—Ç–æ –±–ª–æ–∫–∏ Mega #2)

---

## üß™ –¢–µ—Å—Ç 7: –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–ª–æ–∫–æ–≤

**–ö–æ–º–∞–Ω–¥–∞ 1:**
```json
{"block":1,"action":"up","duration":10000}
```

**–ö–æ–º–∞–Ω–¥–∞ 2 (—á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É):**
```json
{"block":2,"action":"down","duration":10000}
```

**–ö–æ–º–∞–Ω–¥–∞ 3 (—á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã):**
```json
{"block":3,"action":"up","duration":10000}
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
[BLOCK 1] ‚Üí UP (10000ms, 2 actuators)
[BLOCK 2] ‚Üí DOWN (10000ms, 2 actuators)
[BLOCK 3] ‚Üí UP (10000ms, 2 actuators)
[AUTO-STOP] Block 1
[AUTO-STOP] Block 2
[AUTO-STOP] Block 3
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** –í—Å–µ –±–ª–æ–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–æ —Å–≤–æ–∏–º —Ç–∞–π–º–µ—Ä–∞–º

---

## üß™ –¢–µ—Å—Ç 8: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤ (–ø–æ –æ—á–µ—Ä–µ–¥–∏)

**–°–∫–æ–ø–∏—Ä—É–π –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–π –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Å –ø–∞—É–∑–æ–π 5 —Å–µ–∫—É–Ω–¥:**

```json
{"block":1,"action":"up","duration":3000}
```
```json
{"block":2,"action":"up","duration":3000}
```
```json
{"block":3,"action":"up","duration":3000}
```
```json
{"block":4,"action":"up","duration":3000}
```
```json
{"block":5,"action":"up","duration":3000}
```
```json
{"block":6,"action":"up","duration":3000}
```
```json
{"block":7,"action":"up","duration":3000}
```
```json
{"block":8,"action":"up","duration":3000}
```

‚úÖ **–ü—Ä–æ–≤–µ—Ä—å:** –ö–∞–∂–¥—ã–π –±–ª–æ–∫ (1-8) –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –Ω–∞ 3 —Å–µ–∫—É–Ω–¥—ã –∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

---

## üîß –ú–∞–ø–ø–∏–Ω–≥ –ø–∏–Ω–æ–≤ –¥–ª—è —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

| –ë–ª–æ–∫ | Pin 1 | Pin 2 | Pin 3 | Pin 4 | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|------|-------|-------|-------|-------|------------|
| 1    | 22    | 23    | 24    | 25    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |
| 2    | 26    | 27    | 28    | 29    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |
| 3    | 30    | 31    | 32    | 33    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |
| 4    | 34    | 35    | 36    | 37    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |
| 5    | 38    | 39    | 40    | 41    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |
| 6    | 50    | 51    | 52    | 53    | **–§–ò–ó–ò–ß–ï–°–ö–ò –ó–ê–ü–ê–Ø–ù** |
| 7    | 42    | 43    | 44    | 45    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |
| 8    | 46    | 47    | 48    | 49    | –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π |

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∏–Ω–æ–≤ –º—É–ª—å—Ç–∏–º–µ—Ç—Ä–æ–º:**
- **UP:** Pin1=LOW (~0V), Pin2=HIGH (~5V), Pin3=LOW, Pin4=HIGH
- **DOWN:** Pin1=HIGH (~5V), Pin2=LOW (~0V), Pin3=HIGH, Pin4=LOW
- **STOP:** –í—Å–µ –ø–∏–Ω—ã HIGH (~5V)

---

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ –≤–∏–¥–Ω–æ –≤—ã–≤–æ–¥–∞ –≤ Serial Monitor
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å baud rate (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 115200)
- –ü—Ä–æ–≤–µ—Ä—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π COM –ø–æ—Ä—Ç
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏ Arduino (–∫–Ω–æ–ø–∫–∞ RESET)

### –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–º–∞–Ω–¥—ã –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —Ñ–æ—Ä–º–∞—Ç JSON (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏)
- –£–±–µ–¥–∏—Å—å —á—Ç–æ Line ending = "Newline"
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞

### –ü—Ä–æ–±–ª–µ–º–∞: –ë–ª–æ–∫–∏ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤ loop() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è checkBlockTimers()
- –ü–µ—Ä–µ–ø—Ä–æ—à–µ–π Mega –∑–∞–Ω–æ–≤–æ

### –ü—Ä–æ–±–ª–µ–º–∞: –ê–∫—Ç—É–∞—Ç–æ—Ä—ã –¥–≤–∏–≥–∞—é—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É
**–†–µ—à–µ–Ω–∏–µ:**
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –ø—Ä–æ–≤–µ—Ä—å —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤
- –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –ø—Ä–æ–≤–æ–¥–∞ –º–µ—Å—Ç–∞–º–∏ –Ω–∞ –∞–∫—Ç—É–∞—Ç–æ—Ä–µ

---

## ‚úÖ –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞ (–≤—ã–≤–æ–¥ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ)
- [ ] –ë–ª–æ–∫ 1 –¥–≤–∏–∂–µ—Ç—Å—è –í–í–ï–†–•
- [ ] –ë–ª–æ–∫ 1 –¥–≤–∏–∂–µ—Ç—Å—è –í–ù–ò–ó
- [ ] –†—É—á–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ê–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ —Ç–∞–π–º–µ—Ä—É —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ë–ª–æ–∫ 8 —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ö–æ–º–∞–Ω–¥–∞ "stop all" (block=0) —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] Mega #1 –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –±–ª–æ–∫–∏ 9-15
- [ ] –ù–µ—Å–∫–æ–ª—å–∫–æ –±–ª–æ–∫–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- [ ] –í—Å–µ 8 –±–ª–æ–∫–æ–≤ –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø–æ –æ—á–µ—Ä–µ–¥–∏

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ö–æ–≥–¥–∞ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:
1. ‚úÖ Mega #1 —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
2. ‚è≠Ô∏è –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ—à–∏–≤–∫—É –Ω–∞ Mega #2
3. ‚è≠Ô∏è –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Mega #2 (–±–ª–æ–∫–∏ 9-15)
4. ‚è≠Ô∏è –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±–µ Mega –∫ ESP32
5. ‚è≠Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ ESP32 –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

---

**–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é! –£–¥–∞—á–∏! üî•**
