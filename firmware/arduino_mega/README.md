# Arduino Mega - Actuator Controller

## üìã –û–±–∑–æ—Ä

**–î–í–ï ARDUINO MEGA** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 15 –±–ª–æ–∫–∞–º–∏ –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤ (31 –∞–∫—Ç—É–∞—Ç–æ—Ä)

- **Mega #1**: –ë–ª–æ–∫–∏ 1-8 (16 –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤)
- **Mega #2**: –ë–ª–æ–∫–∏ 9-15 (15 –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤, –±–ª–æ–∫ 15 –∏–º–µ–µ—Ç 3 –∞–∫—Ç—É–∞—Ç–æ—Ä–∞)

–û–±–µ –ø–ª–∞—Ç—ã –ø–æ–ª—É—á–∞—é—Ç –∫–æ–º–∞–Ω–¥—ã –æ—Ç ESP32 –ø–æ Serial1.

---

## üîå MEGA #1 - –ë–ª–æ–∫–∏ 1-8

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (16 –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤, 32 –ø–∏–Ω–∞)

| –ë–ª–æ–∫ | –ü–∏–Ω—ã          | –ê–∫—Ç—É–∞—Ç–æ—Ä—ã |
|------|---------------|-----------|
| 1    | 22, 23, 24, 25| 2         |
| 2    | 26, 27, 28, 29| 2         |
| 3    | 30, 31, 32, 33| 2         |
| 4    | 34, 35, 36, 37| 2         |
| 5    | 38, 39, 40, 41| 2         |
| 6    | 50, 51, 52, 53| 2 (—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∑–∞–ø–∞—è–Ω)|
| 7    | 42, 43, 44, 45| 2         |
| 8    | 46, 47, 48, 49| 2         |

**–ü—Ä–æ—à–∏–≤–∫–∞:** `actuator_mega1/actuator_mega1.ino`

---

## üîå MEGA #2 - –ë–ª–æ–∫–∏ 9-15

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (15 –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤, 30 –ø–∏–Ω–æ–≤)

| –ë–ª–æ–∫ | –ü–∏–Ω—ã              | –ê–∫—Ç—É–∞—Ç–æ—Ä—ã |
|------|-------------------|-----------|
| 9    | 22, 23, 24, 25    | 2         |
| 10   | 26, 27, 28, 29    | 2         |
| 11   | 30, 31, 32, 33    | 2         |
| 12   | 34, 35, 36, 37    | 2         |
| 13   | 38, 39, 40, 41    | 2         |
| 14   | 50, 51, 52, 53    | 2 (—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∑–∞–ø–∞—è–Ω)|
| 15   | 42, 43, 44, 45, 46, 47 | **3** |

**–í–ê–ñ–ù–û:** –ë–ª–æ–∫ 15 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **6 –ø–∏–Ω–æ–≤** –¥–ª—è 3-—Ö –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤!

**–ü—Ä–æ—à–∏–≤–∫–∞:** `actuator_mega2/actuator_mega2.ino`

---

## üîß –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ò–Ω–≤–µ—Ä—Å–Ω–∞—è –ª–æ–≥–∏–∫–∞
- **LOW (0V)** = –ê–∫—Ç—É–∞—Ç–æ—Ä –≤–∫–ª—é—á–µ–Ω
- **HIGH (5V)** = –ê–∫—Ç—É–∞—Ç–æ—Ä –≤—ã–∫–ª—é—á–µ–Ω

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–∏–º –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–º
–ö–∞–∂–¥—ã–π –∞–∫—Ç—É–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2 –ø–∏–Ω–∞:
- **Pin A = LOW, Pin B = HIGH** ‚Üí –î–≤–∏–∂–µ–Ω–∏–µ –í–í–ï–†–•
- **Pin A = HIGH, Pin B = LOW** ‚Üí –î–≤–∏–∂–µ–Ω–∏–µ –í–ù–ò–ó
- **Pin A = HIGH, Pin B = HIGH** ‚Üí –°–¢–û–ü

---

## üì° –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–≤—è–∑–∏

### Serial1 (TX1=18, RX1=19) ‚Üî ESP32

**–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã (JSON):**
```json
{"block":1,"action":"up","duration":12000}
{"block":9,"action":"down","duration":12000}
{"block":15,"action":"up","duration":12000}
{"block":0,"action":"stop"}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `block` - –Ω–æ–º–µ—Ä –±–ª–æ–∫–∞:
  - Mega #1: 1-8
  - Mega #2: 9-15
  - 0 = –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –±–ª–æ–∫–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–π –ø–ª–∞—Ç–µ
- `action` - –¥–µ–π—Å—Ç–≤–∏–µ: "up", "down", "stop"
- `duration` - –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 12000)

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{"status":"ok","block":1,"action":"up"}
{"status":"error","message":"Invalid command"}
{"status":"stopped","block":1,"reason":"timeout"}
{"status":"ready","mega":1,"blocks":8}
{"status":"ready","mega":2,"blocks":7}
```

---

## üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏

### Mega #1 (–ë–ª–æ–∫–∏ 1-8)

1. **–ü–æ–¥–∫–ª—é—á–∏ Mega #1 –∫ USB**
2. **–û—Ç–∫—Ä–æ–π Arduino IDE**
3. **–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª:** `actuator_mega1/actuator_mega1.ino`
4. **–£—Å—Ç–∞–Ω–æ–≤–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:** ArduinoJson
   - Tools ‚Üí Manage Libraries ‚Üí –ù–∞–π—Ç–∏ "ArduinoJson" ‚Üí Install
5. **–í—ã–±–µ—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - Tools ‚Üí Board ‚Üí **Arduino Mega or Mega 2560**
   - Tools ‚Üí Port ‚Üí **(–≤—ã–±–µ—Ä–∏ COM –ø–æ—Ä—Ç)**
6. **Upload (Ctrl+U)**

### Mega #2 (–ë–ª–æ–∫–∏ 9-15)

1. **–ü–æ–¥–∫–ª—é—á–∏ Mega #2 –∫ USB**
2. **–û—Ç–∫—Ä–æ–π Arduino IDE**
3. **–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª:** `actuator_mega2/actuator_mega2.ino`
4. **–£—Å—Ç–∞–Ω–æ–≤–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:** ArduinoJson (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞)
5. **–í—ã–±–µ—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - Tools ‚Üí Board ‚Üí **Arduino Mega or Mega 2560**
   - Tools ‚Üí Port ‚Üí **(–≤—ã–±–µ—Ä–∏ COM –ø–æ—Ä—Ç)**
6. **Upload (Ctrl+U)**

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç Mega #1 (—á–µ—Ä–µ–∑ Serial Monitor, 115200 baud)

```json
{"block":1,"action":"up","duration":5000}
{"block":8,"action":"down","duration":5000}
```

**–í—ã–≤–æ–¥:**
```
[BLOCK 1] ‚Üí UP (5000ms, 2 actuators)
[AUTO-STOP] Block 1
```

### –¢–µ—Å—Ç Mega #2 (—á–µ—Ä–µ–∑ Serial Monitor, 115200 baud)

```json
{"block":9,"action":"up","duration":5000}
{"block":15,"action":"up","duration":5000}
```

**–í—ã–≤–æ–¥:**
```
[BLOCK 9] ‚Üí UP (5000ms, 2 actuators)
[BLOCK 15] ‚Üí UP (5000ms, 3 actuators)
[AUTO-STOP] Block 15
```

---

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –ê–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ `duration` –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –∞–∫—Ç—É–∞—Ç–æ—Ä—ã –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

### ‚úÖ –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ö–∞–∂–¥–∞—è Mega —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- –ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞ –æ–¥–Ω–æ–π –ø–ª–∞—Ç–µ
- –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –∏–º–µ–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ç–∞–π–º–µ—Ä

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ JSON
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –±–ª–æ–∫–æ–≤
- Mega #1: –±–ª–æ–∫–∏ 1-8
- Mega #2: –±–ª–æ–∫–∏ 9-15
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ESP32

---

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ESP32

```
Arduino Mega #1        ESP32
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TX1 (Pin 18) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ GPIO 16 (RX2)
RX1 (Pin 19) ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GPIO 17 (TX2)
GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GND

Arduino Mega #2        ESP32
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TX1 (Pin 18) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ GPIO 26 (RX1)
RX1 (Pin 19) ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GPIO 25 (TX1)
GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GND
```

**ESP32 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç:**
- **Serial2** (GPIO 16/17) –¥–ª—è Mega #1
- **Serial1** (GPIO 25/26) –¥–ª—è Mega #2

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### Mega #1
- **–ë–ª–æ–∫–∏:** 8
- **–ê–∫—Ç—É–∞—Ç–æ—Ä—ã:** 16 (–≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ 2)
- **–ü–∏–Ω—ã:** 32 (22-53)
- **Baud rate:** 115200
- **–í—Ä–µ–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 12000 –º—Å (12 —Å–µ–∫—É–Ω–¥)

### Mega #2
- **–ë–ª–æ–∫–∏:** 7
- **–ê–∫—Ç—É–∞—Ç–æ—Ä—ã:** 15 (6√ó2 + 1√ó3)
- **–ü–∏–Ω—ã:** 30 (22-47, 50-53)
- **Baud rate:** 115200
- **–í—Ä–µ–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 12000 –º—Å (12 —Å–µ–∫—É–Ω–¥)

### –ò—Ç–æ–≥–æ
- **–í—Å–µ–≥–æ –±–ª–æ–∫–æ–≤:** 15
- **–í—Å–µ–≥–æ –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤:** 31
- **–î–≤–µ Arduino Mega 2560**

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø–∏–Ω—ã 0 –∏ 1** - –æ–Ω–∏ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Serial (USB)
2. **–ü–∏–Ω—ã 18 –∏ 19** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è Serial1 (—Å–≤—è–∑—å —Å ESP32)
3. **–ë–ª–æ–∫ 6 –Ω–∞ Mega #1** –∏ **–ë–ª–æ–∫ 14 –Ω–∞ Mega #2** —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∑–∞–ø–∞—è–Ω—ã –Ω–∞ –ø–∏–Ω—ã 50-53
4. **–ë–ª–æ–∫ 15** –∏–º–µ–µ—Ç 3 –∞–∫—Ç—É–∞—Ç–æ—Ä–∞ (–ø–∏–Ω—ã 42-47)
5. **–ü–∏–Ω—ã 48-49** –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –Ω–∞ Mega #2

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- **Mega #1** –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –±–ª–æ–∫–∏ 1-8
- **Mega #2** –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –±–ª–æ–∫–∏ 9-15
- –ö–æ–º–∞–Ω–¥—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –Ω–æ–º–µ—Ä–æ–º –±–ª–æ–∫–∞ –±—É–¥—É—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω—ã
- ESP32 –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å, –Ω–∞ –∫–∞–∫—É—é Mega –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
- –ë–ª–æ–∫ 15 –∏–º–µ–µ—Ç **3 –∞–∫—Ç—É–∞—Ç–æ—Ä–∞** (6 –ø–∏–Ω–æ–≤: 42, 43, 44, 45, 46, 47)

---

**–í–µ—Ä—Å–∏—è:** 2.0 (–¥–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ Mega)
**–î–∞—Ç–∞:** 2026-02-09
