# Arduino Mega - Actuator Controller

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ—à–∏–≤–∫–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç—É–∞—Ç–æ—Ä–∞–º–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –æ—Ç ESP32 –ø–æ Serial1.

## üîå –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–ª–æ–∫–æ–≤

### –ë–ª–æ–∫–∏ 1-7 (–ø–æ 2 –∞–∫—Ç—É–∞—Ç–æ—Ä–∞ = 4 –ø–∏–Ω–∞ –∫–∞–∂–¥—ã–π)

| –ë–ª–æ–∫ | –ü–∏–Ω—ã          | –ê–∫—Ç—É–∞—Ç–æ—Ä—ã |
|------|---------------|-----------|
| 1    | 22, 23, 24, 25| 2         |
| 2    | 26, 27, 28, 29| 2         |
| 3    | 30, 31, 32, 33| 2         |
| 4    | 34, 35, 36, 37| 2         |
| 5    | 38, 39, 40, 41| 2         |
| 6    | 50, 51, 52, 53| 2 (—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∑–∞–ø–∞—è–Ω)|
| 7    | 42, 43, 44, 45| 2         |

### –ë–ª–æ–∫ 8 (3 –∞–∫—Ç—É–∞—Ç–æ—Ä–∞ = 6 –ø–∏–Ω–æ–≤) ‚ö†Ô∏è

| –ë–ª–æ–∫ | –ü–∏–Ω—ã              | –ê–∫—Ç—É–∞—Ç–æ—Ä—ã |
|------|-------------------|-----------|
| 8    | 46, 47, 48, 49, 2, 3 | **3**  |

**–í–ê–ñ–ù–û:** –ë–ª–æ–∫ 8 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∏–Ω—ã 2 –∏ 3** –¥–ª—è —Ç—Ä–µ—Ç—å–µ–≥–æ –∞–∫—Ç—É–∞—Ç–æ—Ä–∞!

## üîß –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ò–Ω–≤–µ—Ä—Å–Ω–∞—è –ª–æ–≥–∏–∫–∞
- **LOW (0V)** = –ê–∫—Ç—É–∞—Ç–æ—Ä –≤–∫–ª—é—á–µ–Ω
- **HIGH (5V)** = –ê–∫—Ç—É–∞—Ç–æ—Ä –≤—ã–∫–ª—é—á–µ–Ω

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–¥–Ω–∏–º –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–º
–ö–∞–∂–¥—ã–π –∞–∫—Ç—É–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2 –ø–∏–Ω–∞:
- **Pin A = LOW, Pin B = HIGH** ‚Üí –î–≤–∏–∂–µ–Ω–∏–µ –í–í–ï–†–•
- **Pin A = HIGH, Pin B = LOW** ‚Üí –î–≤–∏–∂–µ–Ω–∏–µ –í–ù–ò–ó
- **Pin A = HIGH, Pin B = HIGH** ‚Üí –°–¢–û–ü

## üì° –ü—Ä–æ—Ç–æ–∫–æ–ª —Å–≤—è–∑–∏

### Serial1 (TX1=18, RX1=19) ‚Üî ESP32

**–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã (JSON):**
```json
{"block":1,"action":"up","duration":12000}
{"block":2,"action":"down","duration":10000}
{"block":8,"action":"up","duration":12000}
{"block":0,"action":"stop"}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `block` - –Ω–æ–º–µ—Ä –±–ª–æ–∫–∞ (1-8), 0 = –≤—Å–µ –±–ª–æ–∫–∏
- `action` - –¥–µ–π—Å—Ç–≤–∏–µ: "up", "down", "stop"
- `duration` - –≤—Ä–µ–º—è –¥–≤–∏–∂–µ–Ω–∏—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 12000)

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{"status":"ok","block":1,"action":"up"}
{"status":"error","message":"Invalid command"}
{"status":"stopped","block":1,"reason":"timeout"}
```

## üöÄ –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—à–∏–≤–∫–∏

1. **–ü–æ–¥–∫–ª—é—á–∏ Arduino Mega –∫ USB**
2. **–û—Ç–∫—Ä–æ–π Arduino IDE**
3. **–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª:** `actuator_test/actuator_test.ino`
4. **–£—Å—Ç–∞–Ω–æ–≤–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É:** ArduinoJson
   - Tools ‚Üí Manage Libraries ‚Üí –ù–∞–π—Ç–∏ "ArduinoJson" ‚Üí Install
5. **–í—ã–±–µ—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - Tools ‚Üí Board ‚Üí **Arduino Mega or Mega 2560**
   - Tools ‚Üí Port ‚Üí **(–≤—ã–±–µ—Ä–∏ COM –ø–æ—Ä—Ç)**
6. **Upload (Ctrl+U)**

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ß–µ—Ä–µ–∑ Serial Monitor (115200 baud)

1. **–û—Ç–∫—Ä–æ–π Serial Monitor**
2. **–û—Ç–ø—Ä–∞–≤—å –∫–æ–º–∞–Ω–¥—É:**
   ```json
   {"block":1,"action":"up","duration":5000}
   ```
3. **–ü—Ä–æ–≤–µ—Ä—å –≤—ã–≤–æ–¥:**
   ```
   [CMD] Received: {"block":1,"action":"up","duration":5000}
   [BLOCK 1] ‚Üí UP (5000ms, 2 actuators)
   [AUTO-STOP] Block 1
   ```

### –¢–µ—Å—Ç –±–ª–æ–∫–∞ 8 (3 –∞–∫—Ç—É–∞—Ç–æ—Ä–∞)

```json
{"block":8,"action":"up","duration":5000}
```

**–í—ã–≤–æ–¥:**
```
[CMD] Received: {"block":8,"action":"up","duration":5000}
[BLOCK 8] ‚Üí UP (5000ms, 3 actuators)
[AUTO-STOP] Block 8
```

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### ‚úÖ –ê–≤—Ç–æ–æ—Å—Ç–∞–Ω–æ–≤–∫–∞
- –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ `duration` –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –∞–∫—Ç—É–∞—Ç–æ—Ä—ã –Ω–µ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ

### ‚úÖ –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –ú–æ–∂–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –±–ª–æ–∫–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ö–∞–∂–¥—ã–π –±–ª–æ–∫ –∏–º–µ–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–π —Ç–∞–π–º–µ—Ä

### ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ JSON
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –±–ª–æ–∫–æ–≤ (1-8)
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ESP32

## üîå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ESP32

```
Arduino Mega           ESP32
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
TX1 (Pin 18) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ GPIO 16 (RX)
RX1 (Pin 19) ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GPIO 17 (TX)
GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ GND
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–í—Å–µ–≥–æ –±–ª–æ–∫–æ–≤:** 8
- **–í—Å–µ–≥–æ –∞–∫—Ç—É–∞—Ç–æ—Ä–æ–≤:** 17 (7√ó2 + 1√ó3)
- **–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∏–Ω–æ–≤:** 34 (–ø–∏–Ω—ã 2, 3, 22-53)
- **Baud rate:** 115200
- **–í—Ä–µ–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** 12000 –º—Å (12 —Å–µ–∫—É–Ω–¥)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –ø–∏–Ω—ã 0 –∏ 1** - –æ–Ω–∏ –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Serial (USB)
2. **–ü–∏–Ω—ã 2 –∏ 3** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –±–ª–æ–∫–∞ 8
3. **–ü–∏–Ω—ã 18 –∏ 19** –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è Serial1 (—Å–≤—è–∑—å —Å ESP32)
4. **–ë–ª–æ–∫ 6** —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –∑–∞–ø–∞—è–Ω –Ω–∞ –ø–∏–Ω—ã 50-53 (–Ω–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –ë–ª–æ–∫ 8 –∏–º–µ–µ—Ç **3 –∞–∫—Ç—É–∞—Ç–æ—Ä–∞** (6 –ø–∏–Ω–æ–≤)
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø—Ä–æ—à–∏–≤–∫–∏ –Ω–∞ –æ–±–µ Mega, –æ–Ω–∏ –±—É–¥—É—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å **–æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –±–ª–æ–∫–∞–º–∏**
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –±–ª–æ–∫–∏ –º–µ–∂–¥—É –ø–ª–∞—Ç–∞–º–∏ (1-4 –Ω–∞ Mega #1, 5-8 –Ω–∞ Mega #2), —Å–æ–∑–¥–∞–¥–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø—Ä–æ—à–∏–≤–∫–∏

---

**–í–µ—Ä—Å–∏—è:** 1.1 (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π 3-–≥–æ –∞–∫—Ç—É–∞—Ç–æ—Ä–∞)
**–î–∞—Ç–∞:** 2026-02-09
